{% extends "base.html" %}
{% block title %}Weather - Wanderlust AI{% endblock %}

{% block content %}
<style>
    /* Dynamic Background for Weather States */
    .weather-bg {
        transition: background 0.6s ease-in-out;
        border-radius: 18px;
        padding: 40px;
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    .bg-clear { background: linear-gradient(135deg, #74ebd5, #ACB6E5); }
    .bg-clouds { background: linear-gradient(135deg, #d7d2cc, #304352); }
    .bg-smoke { background: linear-gradient(135deg, #5c5470, #1f1b24); }
    .bg-haze { background: linear-gradient(135deg, #bdbbb0, #827e77); }
    .bg-mist { background: linear-gradient(135deg, #cfd9df, #e2ebf0); }
    .bg-rain { background: linear-gradient(135deg, #4b79a1, #283e51); }
    .bg-thunder { background: linear-gradient(135deg, #232526, #414345); }
    .bg-snow { background: linear-gradient(135deg, #83a4d4, #b6fbff); }

    .sun-card {
        background: linear-gradient(135deg, #ffdd55, #ffbb33);
        padding: 18px;
        border-radius: 14px;
        text-align: center;
        box-shadow: 0 6px 12px rgba(255, 193, 7, 0.4);
        font-weight: 600;
        font-size: 1.1rem;
        color: #000;
    }

    .alert-box {
        padding: 15px 22px;
        border-left: 4px solid #ff4444;
        font-weight: 500;
        background: rgba(255,0,0,.08);
        border-radius: 10px;
        margin-bottom: 25px;
        color: white;
    }

    .weather-icon-animate {
        width: 120px;
        animation: float 2.5s ease-in-out infinite;
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
        100% { transform: translateY(0px); }
    }
</style>

<div class="container py-5">

    <!-- Search -->
    <div class="card shadow-lg p-4 rounded-4 mb-4"
         style="background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.1);">

        <form method="POST">
            <div class="input-group">
                <input type="text" name="city" class="form-control form-control-lg"
                       placeholder="Search city..." required>
                <button class="btn btn-primary btn-lg">Get Weather</button>
            </div>
        </form>

        {% if error %}
        <div class="alert alert-danger mt-3">{{ error }}</div>
        {% endif %}
    </div>

    {% if data %}

    <!-- Weather Alerts -->
    {% if data.condition in ["Smoke","Haze","Mist","Thunderstorm"] %}
    <div class="alert-box">
        âš  <strong>Weather Alert!</strong> {{ data.condition }}
    </div>
    {% endif %}

    <!-- MAIN WEATHER CARD -->
    <div class="weather-bg bg-{{ data.bg }}">
        <div class="text-center mb-3">
            <img src="{{ data.icon }}" class="weather-icon-animate">
        </div>

        <h1 class="text-center display-3 fw-bold text-white">
            {{ data.temp }}Â°C
        </h1>

        <p class="text-center fs-4 text-light">{{ data.condition }}</p>

        <p class="text-center text-white-50">
            Feels Like: {{ data.feels_like }}Â°C &nbsp; | &nbsp;
            Wind: {{ data.wind }} m/s &nbsp; | &nbsp;
            Humidity: {{ data.humidity }}%
        </p>
    </div>

    <!-- Sunrise / Sunset -->
    <div class="row mt-4">
        <div class="col-md-6 mb-3">
            <div class="sun-card">
                ðŸŒ… Sunrise: <br> {{ data.sunrise }}
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="sun-card">
                ðŸŒ‡ Sunset: <br> {{ data.sunset }}
            </div>
        </div>
    </div>

    {% endif %}

</div>

{% endblock %}
